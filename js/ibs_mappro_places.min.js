(function(g){IBS_MAPPRO.prototype.searchPlaces=function(b){var a=b.searchBox.getPlaces();if(0<a.length){b.foundPlaces.forEach(function(b){b.marker.setMap(null)});b.foundPlaces=[];for(var c in a){var d=new google.maps.Marker({map:b.googlemap,title:a[c].name,position:a[c].geometry.location,icon:{url:"http://maps.gstatic.com/mapfiles/circle.png",anchor:new google.maps.Point(16,16),scaledSize:new google.maps.Size(16,23)}});d.index=c;b.foundPlaces.push({place:a[c],marker:d});google.maps.event.addListener(d,
"click",function(a){var c=b.foundPlaces[parseInt(this.index)],d=parseInt(this.index);b.placesService.getDetails(c.place,function(a,f){if(f===google.maps.places.PlacesServiceStatus.OK){b.foundPlaces[d].details=a;var e=b.html.map.find(".ibs-search-info");e.find(".ibs-search-info-name").text(a.name);e.find(".ibs-search-info-address").text(a.formatted_address);e.find(".ibs-search-info-phone").text(a.formatted_phone_number);e.find(".ibs-search-info-desc").html(a.html_attributions);e.find(".ibs-search-info-web").attr({href:a.url});
e.find(".ibs-search-info-mark").attr({rel:d});e=e.clone();e.show();b.infowindow.setContent(e[0]);b.infowindow.open(b.googlemap,c.marker)}else console.error(f)})});d=new google.maps.LatLngBounds;a[c].geometry.viewport?d.union(a[c].geometry.viewport):d.extend(a[c].geometry.location);b.googlemap.fitBounds(d)}}}})(jQuery);
